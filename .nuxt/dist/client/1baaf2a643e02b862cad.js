(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{323:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAmpJREFUOBGNlD1oU1EUx30vSaPBBEPFIW4GBAPRfImgq1IzCCIGChGaxCSDi+JSLCoiBTdnybfiIMQWwckOksG2SM1HK4bSDOKik1YSvyBN4u+ERmLsM7nDO+f97//877n3nnOVXdsjFosdx51UFOUY1trpdBr4i9iHyWRyQ2hwDoNNgZ3CmoE28VexT+CsCEeRTzQavQzB0W6353U6XTmRSPwIBAJ7LBbLSVVVz0N5ITzGBJxn9Xp9KZ/P/4zH46ZWq+WGc4G5d4hmFEAPq1xC8KYIdcP6PqFQaJ/BYLgnULPZvJHL5b72TXddEUZjFo3HOo/Hc5VV5lOp1PtBovxXKpVfbrd7mYCX2Wx2cydOsVhsulyuumSqh+BqNBqzOxF7WDqd/tLztSwab61W622VNMc5j29axFFx0WAX4yoBcgFjowZq8fx+v1G0VFRXzWbzES3iqLjNZnOw27JkOKfX6ydGDdTicSFnudynaq1WW4R0QMpHizwMJ/YE2Vm5vGW1UChsMZIERaTmhgUPziO2H2wKjQfYtk4I5XL5s9frHWOVi3a7/VW1Wm0JPmyQwG62OgNvgey6rdcVlECKc93n8x0yGo1nEH09TFTEOPtpktig5eZ6i/8R3BYt0TlHTSbTOafTuUSXbPWI/ZYy28u4A/YBsWz/3F+CMlEqlVYQPcjqk7TcGv/f+wMikYiNBWcotze066P+OfH/ERQQkTV6k4dHd4Wz/chxfBJcnjiw6/LicGbPBRsc3edrEOz9h8NhB5leI5sFzkpq9jT2Pq/Seo8zaP8rKORgMGhhi7fEp3DvZjKZhvha4zdT5fxCIgQ02AAAAABJRU5ErkJggg=="},324:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAAklJREFUOBGlVUFoU0EQfbNu2npKQbxUrcazSk9VKmgKKtIgtogePBkPCgXBopaiSNOoF6N4ECrqIb14UWorogQVkouei3etWgVBxIAHm+Q369votr+1SRZcSHb/zps3s7Mzs4I649wzs1lacVgMkiLosjBjMGMEWVPCk5sJ+Wj34imjCykJ7NoO+TMt/Q89NRv0WlyGwQCF34l4UzWYtQgliHG/xwDr+DkZLGBCayQy+5AiFbdXEA7nTK/RyFI0R0+uzZeRv90nJQt048xz09rWgl4Sj9BgF3EVlLA9k5CvFqMd8PxLE+d6SqoYL85i9N5pqThZeP5rIDeUM3MRjRmS/oRClJglwuEXpoP+PuDvTuaAXAwT1Fvz+B2mirMIkMv0yTuHq8Xwwitzn8fcVnyPPfU8cwrNZs2YbCTZAG/w+P+SWWOqTeMIj/rtQxGFZtZ95FoUkgS+fnRMyj4KzTCK3u1wedYM7CNfTBsfcCMM06ibSX5S85rfsrRijcA+sojCIE+7SzGXsrzh3UcfmhYfxdUwVpcVs5OE42o+wCS9XN8Zxd7VwD57W9oRtxylMh4rltJnsk+tUUjbzuFDEMacumsiDNmY5bBcygpZv6N0t7O7B+kw2Gcd3Yo0yTZZjhqXU7LNgezT7CINm4PDW8/aYxhjexusAv039kthGaH9CLevBeDqpx/Ir0x4175YrpdqngVIXj8oeatvB2O5fHg3WMYs+IUrtw7JlzDDP4ROaJ8AFUE/TZ5g0BefAIZkolrBtHsCHN7NvwGJxNobXsOvMAAAAABJRU5ErkJggg=="},325:function(t,e,n){"use strict";function r(t){var e,n=new Date(1e3*t),r=n.valueOf(),o=n.getFullYear(),l=n.getMonth()+1,c=n.getDate(),m=new Date;return(e=m.valueOf()-r)<=6e4?"刚刚":6e4<e&&e<=36e5?Math.round(e/6e4)+"分钟前":36e5<e&&e<=864e5?Math.round(e/36e5)+"小时前":864e5<e&&e<=1296e6?Math.round(e/864e5)+"天前":(e>1296e6&&m.getFullYear(),o+"-"+l+"-"+c)}n.d(e,"a",(function(){return r}))},331:function(t,e,n){t.exports=n.p+"img/4834ac2.png"},335:function(t,e,n){},377:function(t,e,n){"use strict";var r=n(335);n.n(r).a},395:function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"news-detail-t-l"},[e("img",{attrs:{src:n(188),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[e("img",{attrs:{src:n(323),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[e("img",{attrs:{src:n(323),alt:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"news-detail-rec"},[r("div",{staticClass:"hot-news-list-t"},[r("div",{staticClass:"hot-news-list-t-icon"}),t._v(" "),r("span",[t._v("你可能感兴趣的")]),t._v(" "),r("img",{staticStyle:{width:"20px",height:"20px","margin-right":"5px"},attrs:{src:n(324),alt:""}}),t._v(" "),r("span",{staticStyle:{"font-size":"12px","font-family":"PingFangSC-Regular,PingFang SC","font-weight":"400",color:"rgba(118,188,255,1)","line-height":"30px"}},[t._v("换一换")])]),t._v(" "),r("div",{staticClass:"hot-news-list-d"},[r("ul",[r("li",[r("div",{staticClass:"news-detail-rec-l"},[r("img",{attrs:{src:n(188),alt:""}})]),t._v(" "),r("div",{staticClass:"news-detail-rec-r"},[r("span",[t._v("全民体育官方")]),t._v(" "),r("button",[t._v("关注")]),t._v(" "),r("div",{staticClass:"news-detail-rec-j"},[t._v("\n                  全民体育主编\n                ")]),t._v(" "),r("p",[t._v("\n                  资深体育评论员，专业媒体供稿人\n                ")])])]),t._v(" "),r("li",[r("div",{staticClass:"news-detail-rec-l"},[r("img",{attrs:{src:n(188),alt:""}})]),t._v(" "),r("div",{staticClass:"news-detail-rec-r"},[r("span",[t._v("全民体育官方")]),t._v(" "),r("button",[t._v("关注")]),t._v(" "),r("div",{staticClass:"news-detail-rec-j"},[t._v("\n                  全民体育主编\n                ")]),t._v(" "),r("p",[t._v("\n                  资深体育评论员，专业媒体供稿人\n                ")])])]),t._v(" "),r("li",[r("div",{staticClass:"news-detail-rec-l"},[r("img",{attrs:{src:n(188),alt:""}})]),t._v(" "),r("div",{staticClass:"news-detail-rec-r"},[r("span",[t._v("全民体育官方")]),t._v(" "),r("button",[t._v("关注")]),t._v(" "),r("div",{staticClass:"news-detail-rec-j"},[t._v("\n                  全民体育主编\n                ")]),t._v(" "),r("p",[t._v("\n                  资深体育评论员，专业媒体供稿人\n                ")])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hot-news-list-t"},[e("div",{staticClass:"hot-news-list-t-icon"}),this._v(" "),e("span",[this._v("热门新闻")])])}],o=(n(30),n(3)),time=n(325),base=n(55),l={name:"Detail",layout:"newsLayout",data:function(){return{article_id:"",newsDetail:"",newsPublishFormatTime:"",hotNewsList:[],newsReplyList:[],showComment:-1,showCommentReply:-1,offsetComment:0,replyContent:"",dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",nickname:"",ns_device_id:"website",imageUrl:"",uploadBaseUrl:base.a.sq+"/UploadAvatar",fileObj:"",replyReplyContent:"",avatar_url:null}},head:function(){return{title:this.newsDetail.title}},watch:{$route:function(t,e){}},watchQuery:["shorturl"],asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query.shorturl,e.next=3,t.$axios.get("".concat(base.a.sq,"/v2/GetArticleDetail"),{params:{shorturl:n}});case 3:return r=e.sent,e.next=6,t.$axios.get("".concat(base.a.sq,"/v2/GetArticles"),{params:{articleType:3,limit:4,offset:0}});case 6:return o=e.sent,"news",l=r.data.Data.article_id,"newest",e.next=12,t.$axios.get("".concat(base.a.sq,"/v2/")+"news/"+l+"/newest/replys",{params:{offset:0,limit:14}});case 12:return c=e.sent,(m=c.data.Data.list).forEach((function(e){var n=e.reply_id;t.$axios.get("".concat(base.a.sq,"/v2/")+"news/"+n+"/toplike/replys",{params:{offset:0}}).then((function(t){e.replyReply=t.data.Data.list}))})),e.abrupt("return",{newsDetail:r.data.Data,newsPublishFormatTime:Object(time.a)(r.data.Data.timestamp),hotNewsList:o.data.Data.articles,newsReplyList:m,article_id:r.data.Data.article_id});case 16:case"end":return e.stop()}}),e)})))()},mounted:function(){this.avatar_url=sessionStorage.getItem("avatar_url")},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.fileObj=e.raw},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},updateUserInfo:function(){var t=this;if(""!==this.fileObj){var e={"Content-Type":"application/x-www-form-urlencoded",ns_device_id:"website",uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")},form=new FormData;form.append("image",this.fileObj),this.$axios.$post("".concat(base.a.sq,"/UploadAvatar"),form,{headers:e}).then((function(e){1===e.Status?(sessionStorage.removeItem("avatar_url"),t.$forceUpdate(sessionStorage.setItem("avatar_url",e.Data.url))):(t.$message({message:"头像更新失败",type:"warning"}),t.$router.go(0))}))}""!==this.nickname?this.$axios.put("".concat(base.a.sq,"/UpdateNickName"),{name:this.nickname},{headers:{ns_device_id:this.ns_device_id,uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then((function(e){t.dialogFormVisible=!1,1===e.data.Status?(sessionStorage.removeItem("nickname"),sessionStorage.setItem("nickname",t.nickname),t.$message({message:"修改成功",type:"success"}),t.$router.go(0)):(t.$message.error(e.data.ErrMsg),t.$router.go(0))})):this.$message({message:"昵称不能为空",type:"warning"})},replyNews:function(t){var e=this,n=sessionStorage.getItem("uid"),r=sessionStorage.getItem("token"),o=sessionStorage.getItem("nickname");if(null===n||null==r)this.$message({message:"请先登录，再留言",type:"success"});else if(""===o||null===o)this.dialogFormVisible=!0;else{if(""===this.replyContent)return this.$message({message:"留言内容不能为空",type:"warning"});var l=this.article_id,c={content:[{content:this.replyContent,type:1}],level:t},m={ns_device_id:"website",uid:n,token:r};this.$axios.post("".concat(base.a.sq,"/v2/")+"news/"+l+"/reply",c,{headers:m}).then((function(t){1===t.data.Status?(e.$message({message:"恭喜你，留言成功",type:"success"}),e.$router.go(0)):e.$message.error(t.data.ErrMsg)}))}},replyReplyNews:function(t,e){var n=this,r=sessionStorage.getItem("uid"),o=sessionStorage.getItem("token"),l=sessionStorage.getItem("nickname");if(null===r||null==o)this.$message({message:"请先登录，再留言",type:"success"});else if(""===l||null===l)this.dialogFormVisible=!0;else{if(""===this.replyReplyContent)return this.$message({message:"留言内容不能为空",type:"warning"});var c=e,m={content:[{content:this.replyReplyContent,type:1}],level:t},v={ns_device_id:"website",uid:r,token:o};this.$axios.post("".concat(base.a.sq,"/v2/")+"news/"+c+"/reply",m,{headers:v}).then((function(t){1===t.data.Status?(n.$message({message:"恭喜你，留言成功",type:"success"}),n.$router.go(0)):n.$message.error(t.data.ErrMsg)}))}},isShowComment:function(t){this.showComment=t},isHideComment:function(t){this.showComment=-1},isShowCommentReply:function(i){this.showCommentReply=i},isHideCommentReply:function(i){this.showCommentReply=-1},showMoreComment:function(i){var t=this,e=this.article_id;this.offsetComment=i+4;this.$axios.get("".concat(base.a.sq,"/v2/")+"news/"+e+"/newest/replys",{params:{offset:this.offsetComment,limit:4}}).then((function(e){var n=e.data.Data.list;n.forEach((function(e){var n=e.reply_id;t.$axios.get("".concat(base.a.sq,"/v2/")+"news/"+n+"/toplike/replys",{params:{offset:0}}).then((function(n){var r=n.data.Data.list;t.$forceUpdate(e.replyReply=r)}))})),t.newsReplyList=t.newsReplyList.concat(n)}))}}},c=(n(377),n(6)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"news-detail"},[r("h3",[t._v(t._s(t.newsDetail.title))]),t._v(" "),r("div",{staticClass:"news-detail-t"},[t._m(0),t._v(" "),r("div",{staticClass:"news-detail-t-r"},[r("div",{staticClass:"news-detail-t-r-t"},[t.newsDetail.author?r("span",[t._v(t._s(t.newsDetail.author.name))]):t._e(),t._v(" "),r("button",[t._v("关注")])]),t._v(" "),r("div",{staticClass:"news-detail-t-r-d"},[r("div",{staticClass:"news-detail-t-r-d-l"},[t._v("\n              全民体育主编\n            ")]),t._v(" "),r("span",[t._v(t._s(t.newsPublishFormatTime))])])])]),t._v(" "),r("div",{staticClass:"news-detail-c"},t._l(t.newsDetail.content,(function(content,e){return r("div",{key:e},[1==content.type?r("div",[r("p",[t._v(t._s(content.content))])]):t._e(),t._v(" "),2==content.type?r("div",[r("img",{attrs:{src:content.content,alt:""}})]):t._e()])})),0),t._v(" "),r("div",{staticClass:"publish-comment"},[r("p",[t._v("我有话说")]),t._v(" "),r("div",{staticClass:"publish-comment-d"},[r("div",{staticClass:"publish-comment-d-i"},[""===this.avatar_url||null===this.avatar_url?r("img",{attrs:{src:n(331),alt:""}}):t._e(),t._v(" "),""!==this.avatar_url&null!==this.avatar_url?r("img",{attrs:{src:this.avatar_url,alt:""}}):t._e()]),t._v(" "),r("div",{staticClass:"publish-comment-d-tx"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyContent,expression:"replyContent"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"说两句呗"},domProps:{value:t.replyContent},on:{input:function(e){e.target.composing||(t.replyContent=e.target.value)}}}),t._v(" "),r("button",{on:{click:function(e){return t.replyNews(1)}}},[t._v("发表"),r("br"),t._v("评论")])])])]),t._v(" "),r("div",{staticClass:"comment-list"},[r("div",{staticClass:"comment-list-t"},[t._v("全部评论")]),t._v(" "),t._l(t.newsReplyList,(function(e,o){return r("div",{key:o,staticClass:"comment-list-d"},[r("div",{staticClass:"comment-list-d-t"},[null!=e.author.avatar_url&""!=e.author.avatar_url?r("img",{attrs:{src:e.author.avatar_url,alt:""}}):t._e(),t._v(" "),null==e.author.avatar_url||""==e.author.avatar_url?r("img",{attrs:{src:n(188),alt:""}}):t._e(),t._v(" "),r("a",[t._v(t._s(e.author.nickName))]),t._v(" "),r("span",{staticClass:"comment-list-d-t-t"},[t._v(t._s(t._f("dateForHour")(e.create_time)))])]),t._v(" "),t._l(e.content,(function(content,i){return r("div",{key:i,staticClass:"comment-list-content"},[1==content.type?r("p",[t._v("\n              "+t._s(content.content)+"\n            ")]):t._e()])})),t._v(" "),r("ul",t._l(e.replyReply,(function(n){return r("li",{key:n.reply_id},[r("div",{staticClass:"comment-item"},[r("div",{staticClass:"comment-item-reply"},[r("span",[t._v(t._s(n.author.nickName)+" :")]),t._v(" "),t._l(n.content,(function(e,n){return r("p",{key:n},[t._v(" "+t._s(e.content)+" ")])}))],2),t._v(" "),r("div",{staticStyle:{clear:"both"}}),t._v(" "),r("div",{staticClass:"comment-item-c"},[r("div",{staticClass:"comment-item-c-l"},[t._m(1,!0),t._v(" "),r("span",[t._v(t._s(n.likes_count))])]),t._v(" "),r("div",{staticClass:"comment-item-c-r"},[r("span",[t._v(t._s(t._f("dateForHour")(n.create_time)))])])]),t._v(" "),n.reply_id===t.showCommentReply?r("div",{staticClass:"comment-item-i-b"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.replyReplyContent,expression:"replyReplyContent"}],attrs:{type:"text"},domProps:{value:t.replyReplyContent},on:{input:function(e){e.target.composing||(t.replyReplyContent=e.target.value)}}}),t._v(" "),r("button",{on:{click:function(n){return t.replyReplyNews(2,e.reply_id)}}},[t._v("发表")])]):t._e()])])})),0),t._v(" "),r("div",{staticClass:"comment-list-dd"},[r("div",{staticClass:"comment-list-dd-l"},[t._m(2,!0),t._v(" "),r("span",[t._v(t._s(e.likes_count))]),t._v(" "),o!==t.showComment?r("button",{on:{click:function(e){return t.isShowComment(o)}}},[t._v("回复")]):t._e(),t._v(" "),o===t.showComment?r("button",{staticClass:"shouqi",on:{click:function(e){return t.isHideComment(o)}}},[t._v("收起")]):t._e()]),t._v(" "),r("div",{staticStyle:{clear:"both"}})]),t._v(" "),o===t.showComment?r("div",{staticClass:"comment-item-i-b"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.replyReplyContent,expression:"replyReplyContent"}],attrs:{type:"text"},domProps:{value:t.replyReplyContent},on:{input:function(e){e.target.composing||(t.replyReplyContent=e.target.value)}}}),t._v(" "),r("button",{on:{click:function(n){return t.replyReplyNews(2,e.reply_id)}}},[t._v("发表")])]):t._e()],2)}))],2),t._v(" "),r("div",{staticClass:"comment-more"},[r("span",{on:{click:function(e){return t.showMoreComment(t.offsetComment)}}},[t._v("查看更多")])])]),t._v(" "),r("div",{staticClass:"news-detail-r"},[t._m(3),t._v(" "),r("div",{staticClass:"hot-news-list"},[t._m(4),t._v(" "),r("div",{staticClass:"hot-news-list-d"},[r("ul",t._l(t.hotNewsList,(function(e,n){return r("li",{key:n},[r("div",{staticClass:"hot-news-list-d-l"},[r("img",{attrs:{src:e.image,alt:""}})]),t._v(" "),r("div",{staticClass:"hot-news-list-d-r"},[r("nuxt-link",{attrs:{to:"/news/detail?shorturl="+e.shorturl}},[t._v(t._s(e.title))])],1)])})),0)])])]),t._v(" "),r("el-dialog",{attrs:{title:"修改用户信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",[r("el-form-item",{attrs:{label:"头像","label-width":t.formLabelWidth}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadBaseUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?r("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),r("el-form-item",{attrs:{label:"昵称","label-width":t.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.updateUserInfo}},[t._v("确 定")])],1)],1)],1)}),r,!1,null,"7f1414d8",null);e.default=component.exports}}]);