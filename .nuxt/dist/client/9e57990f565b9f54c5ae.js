(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{323:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAmpJREFUOBGNlD1oU1EUx30vSaPBBEPFIW4GBAPRfImgq1IzCCIGChGaxCSDi+JSLCoiBTdnybfiIMQWwckOksG2SM1HK4bSDOKik1YSvyBN4u+ERmLsM7nDO+f97//877n3nnOVXdsjFosdx51UFOUY1trpdBr4i9iHyWRyQ2hwDoNNgZ3CmoE28VexT+CsCEeRTzQavQzB0W6353U6XTmRSPwIBAJ7LBbLSVVVz0N5ITzGBJxn9Xp9KZ/P/4zH46ZWq+WGc4G5d4hmFEAPq1xC8KYIdcP6PqFQaJ/BYLgnULPZvJHL5b72TXddEUZjFo3HOo/Hc5VV5lOp1PtBovxXKpVfbrd7mYCX2Wx2cydOsVhsulyuumSqh+BqNBqzOxF7WDqd/tLztSwab61W622VNMc5j29axFFx0WAX4yoBcgFjowZq8fx+v1G0VFRXzWbzES3iqLjNZnOw27JkOKfX6ydGDdTicSFnudynaq1WW4R0QMpHizwMJ/YE2Vm5vGW1UChsMZIERaTmhgUPziO2H2wKjQfYtk4I5XL5s9frHWOVi3a7/VW1Wm0JPmyQwG62OgNvgey6rdcVlECKc93n8x0yGo1nEH09TFTEOPtpktig5eZ6i/8R3BYt0TlHTSbTOafTuUSXbPWI/ZYy28u4A/YBsWz/3F+CMlEqlVYQPcjqk7TcGv/f+wMikYiNBWcotze066P+OfH/ERQQkTV6k4dHd4Wz/chxfBJcnjiw6/LicGbPBRsc3edrEOz9h8NhB5leI5sFzkpq9jT2Pq/Seo8zaP8rKORgMGhhi7fEp3DvZjKZhvha4zdT5fxCIgQ02AAAAABJRU5ErkJggg=="},324:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAAklJREFUOBGlVUFoU0EQfbNu2npKQbxUrcazSk9VKmgKKtIgtogePBkPCgXBopaiSNOoF6N4ECrqIb14UWorogQVkouei3etWgVBxIAHm+Q369votr+1SRZcSHb/zps3s7Mzs4I649wzs1lacVgMkiLosjBjMGMEWVPCk5sJ+Wj34imjCykJ7NoO+TMt/Q89NRv0WlyGwQCF34l4UzWYtQgliHG/xwDr+DkZLGBCayQy+5AiFbdXEA7nTK/RyFI0R0+uzZeRv90nJQt048xz09rWgl4Sj9BgF3EVlLA9k5CvFqMd8PxLE+d6SqoYL85i9N5pqThZeP5rIDeUM3MRjRmS/oRClJglwuEXpoP+PuDvTuaAXAwT1Fvz+B2mirMIkMv0yTuHq8Xwwitzn8fcVnyPPfU8cwrNZs2YbCTZAG/w+P+SWWOqTeMIj/rtQxGFZtZ95FoUkgS+fnRMyj4KzTCK3u1wedYM7CNfTBsfcCMM06ibSX5S85rfsrRijcA+sojCIE+7SzGXsrzh3UcfmhYfxdUwVpcVs5OE42o+wCS9XN8Zxd7VwD57W9oRtxylMh4rltJnsk+tUUjbzuFDEMacumsiDNmY5bBcygpZv6N0t7O7B+kw2Gcd3Yo0yTZZjhqXU7LNgezT7CINm4PDW8/aYxhjexusAv039kthGaH9CLevBeDqpx/Ir0x4175YrpdqngVIXj8oeatvB2O5fHg3WMYs+IUrtw7JlzDDP4ROaJ8AFUE/TZ5g0BefAIZkolrBtHsCHN7NvwGJxNobXsOvMAAAAABJRU5ErkJggg=="},325:function(t,e,n){"use strict";function o(t){var e,n=new Date(1e3*t),o=n.valueOf(),r=n.getFullYear(),l=n.getMonth()+1,c=n.getDate(),m=new Date;return(e=m.valueOf()-o)<=6e4?"刚刚":6e4<e&&e<=36e5?Math.round(e/6e4)+"分钟前":36e5<e&&e<=864e5?Math.round(e/36e5)+"小时前":864e5<e&&e<=1296e6?Math.round(e/864e5)+"天前":(e>1296e6&&m.getFullYear(),r+"-"+l+"-"+c)}n.d(e,"a",(function(){return o}))},331:function(t,e,n){t.exports=n.p+"img/4834ac2.png"},332:function(t,e,n){},374:function(t,e,n){"use strict";var o=n(332);n.n(o).a},393:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[e("img",{attrs:{src:n(323),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"#"}},[e("img",{attrs:{src:n(323),alt:""}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"news-detail-rec"},[o("div",{staticClass:"news-detail-rec-container"},[o("div",{staticClass:"hot-news-list-t"},[o("div",{staticClass:"hot-news-list-t-icon"}),t._v(" "),o("span",[t._v("你可能感兴趣的")]),t._v(" "),o("a",{attrs:{href:"#"}},[o("img",{staticStyle:{width:"20px",height:"20px","margin-right":"12px"},attrs:{src:n(324),alt:""}}),t._v(" "),o("span",{staticStyle:{"font-size":"12px","font-family":"PingFangSC-Regular,PingFang SC","font-weight":"400",color:"rgba(118,188,255,1)","line-height":"30px",cursor:"pointer"}},[t._v("换一换")])])]),t._v(" "),o("div",{staticClass:"hot-news-list-d"},[o("ul",[o("li",[o("div",{staticClass:"news-detail-rec-l"},[o("img",{attrs:{src:n(188),alt:""}})]),t._v(" "),o("div",{staticClass:"news-detail-rec-r"},[o("span",[t._v("全民体育官方")]),t._v(" "),o("button",[t._v("关注")]),t._v(" "),o("div",{staticClass:"news-detail-rec-j"},[t._v("\n                      全民体育主编\n                    ")]),t._v(" "),o("p",[t._v("\n                      资深体育评论员，专业媒体供稿人\n                    ")])])]),t._v(" "),o("li",[o("div",{staticClass:"news-detail-rec-l"},[o("img",{attrs:{src:n(188),alt:""}})]),t._v(" "),o("div",{staticClass:"news-detail-rec-r"},[o("span",[t._v("全民体育官方")]),t._v(" "),o("button",[t._v("关注")]),t._v(" "),o("div",{staticClass:"news-detail-rec-j"},[t._v("\n                      全民体育主编\n                    ")]),t._v(" "),o("p",[t._v("\n                      资深体育评论员，专业媒体供稿人\n                    ")])])]),t._v(" "),o("li",[o("div",{staticClass:"news-detail-rec-l"},[o("img",{attrs:{src:n(188),alt:""}})]),t._v(" "),o("div",{staticClass:"news-detail-rec-r"},[o("span",[t._v("全民体育官方")]),t._v(" "),o("button",[t._v("关注")]),t._v(" "),o("div",{staticClass:"news-detail-rec-j"},[t._v("\n                      全民体育主编\n                    ")]),t._v(" "),o("p",[t._v("\n                      资深体育评论员，专业媒体供稿人\n                    ")])])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bbs-r-c-t"},[e("div",{staticClass:"bbs-r-c-t-icon"}),this._v(" "),e("span",[this._v("热门帖子")])])}],r=(n(30),n(3)),time=n(325),base=n(55),l={name:"Detail",layout:"bbsLayout",data:function(){return{article_id:"",bbsDetail:"",bbsPublishFormatTime:"",hotBbsList:[],bbsReplyList:[],newsReplyList:[],showComment:-1,showCommentReply:-1,offsetComment:0,replyContent:"",dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",nickname:"",ns_device_id:"website",imageUrl:"",uploadBaseUrl:base.a.sq+"/UploadAvatar",fileObj:"",replyReplyContent:"",token:"",avatar_url:null}},watch:{$route:function(t,e){}},watchQuery:["article_id"],asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query.article_id,e.next=3,t.$axios.get("".concat(base.a.sq,"/v1/forum/")+n,{params:{}});case 3:return o=e.sent,"all","toplike",e.next=8,t.$axios.get("".concat(base.a.sq,"/v1/forum/")+"all/0/toplike/articles",{params:{limit:4,offset:0}});case 8:return r=e.sent,"forum",l=n,"newest",c={offset:0,limit:4},e.next=15,t.$axios.get("".concat(base.a.sq,"/v2/")+"forum/"+l+"/newest/replys",{params:c});case 15:return m=e.sent,(v=m.data.Data.list).forEach((function(e){var n=e.reply_id;t.$axios.get("".concat(base.a.sq,"/v2/")+"forum/"+n+"/toplike/replys",{params:{offset:0}}).then((function(t){e.replyReply=t.data.Data.list}))})),e.abrupt("return",{bbsDetail:o.data.Data[0],bbsPublishFormatTime:Object(time.a)(o.data.Data[0].create_time),hotBbsList:r.data.Data.list,newsReplyList:v});case 19:case"end":return e.stop()}}),e)})))()},mounted:function(){this.token=sessionStorage.getItem("token")},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.fileObj=e.raw},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},updateUserInfo:function(){var t=this;if(""!==this.fileObj){var form=new FormData;form.append("image",this.fileObj),this.$axios.post("".concat(base.a.sq,"/UploadAvatar"),form,{headers:{"Content-Type":"application/x-www-form-urlencoded",ns_device_id:"website",uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then((function(e){1===e.data.Status?(sessionStorage.removeItem("avatar_url"),t.$forceUpdate(sessionStorage.setItem("avatar_url",e.data.Data.url))):(t.$message({message:"头像更新失败",type:"warning"}),t.$router.go(0))}))}""!==this.nickname?this.$axios.put("".concat(base.a.sq,"/UpdateNickName"),{name:this.nickname},{headers:{ns_device_id:this.ns_device_id,uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then((function(e){t.dialogFormVisible=!1,1===e.data.Status?(sessionStorage.removeItem("nickname"),sessionStorage.setItem("nickname",t.nickname),t.$message({message:"修改成功",type:"success"}),t.$router.go(0)):(t.$message.error(e.data.ErrMsg),t.$router.go(0))})):this.$message({message:"昵称不能为空",type:"warning"})},isShowCommentReply:function(i){this.showCommentReply=i},isHideCommentReply:function(i){this.showCommentReply=-1},isShowComment:function(t){this.showComment=t},isHideComment:function(t){this.showComment=-1},updateNickname:function(){var t=this;this.$axios.put("".concat(base.a.sq,"/UpdateNickName"),{name:this.nickname},{headers:{ns_device_id:this.ns_device_id,uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then((function(e){t.dialogFormVisible=!1,1===e.data.Status?(sessionStorage.removeItem("nickname"),sessionStorage.setItem("nickname",t.nickname),t.$message({message:"昵称修改成功",type:"success"}),t.$router.go(0)):t.$message.error(e.data.ErrMsg)}))},replyNews:function(t){var e=this,n=sessionStorage.getItem("uid"),o=sessionStorage.getItem("token"),r=sessionStorage.getItem("nickname");if(null===n||null==o)this.$message({message:"请先登录，再留言",type:"success"});else if(""===r||null===r)this.dialogFormVisible=!0;else{if(""===this.replyContent)return this.$message({message:"留言内容不能为空",type:"warning"});var l=this.$route.query.article_id;this.$axios.post("".concat(base.a.sq,"/v2/")+"forum/"+l+"/reply",{content:[{content:this.replyContent,type:1}],level:t},{headers:{ns_device_id:"website",uid:n,token:o}}).then((function(t){1===t.data.Status?(e.$message({message:"恭喜你，留言成功",type:"success"}),e.$router.go(0)):e.$message.error(t.data.ErrMsg)}))}},replyReplyNews:function(t,e){var n=this,o=sessionStorage.getItem("uid"),r=sessionStorage.getItem("token"),l=sessionStorage.getItem("nickname");if(null===o||null==r)this.$message({message:"请先登录，再留言",type:"success"});else if(""===l||null===l)this.dialogFormVisible=!0;else{if(""===this.replyReplyContent)return this.$message({message:"留言内容不能为空",type:"warning"});this.$axios.post("".concat(base.a.sq,"/v2/")+"forum/"+e+"/reply",{content:[{content:this.replyReplyContent,type:1}],level:t},{headers:{ns_device_id:"website",uid:o,token:r}}).then((function(t){1===t.data.Status?(n.$message({message:"恭喜你，留言成功",type:"success"}),n.$router.go(0)):n.$message.error(t.data.ErrMsg)}))}},showMoreComment:function(i){var t=this,e=this.$route.query.article_id;this.offsetComment=i+4;this.$axios.get("".concat(base.a.sq,"/v2/")+"forum/"+e+"/newest/replys",{params:{offset:this.offsetComment,limit:4}}).then((function(e){var n=e.data.Data.list;n.forEach((function(e){var n=e.reply_id;t.$axios.get("".concat(base.a.sq,"/v2/")+"forum/"+n+"/toplike/replys",{params:{offset:0}}).then((function(n){var o=n.data.Data.list;t.$forceUpdate(e.replyReply=o)}))})),t.newsReplyList=t.newsReplyList.concat(n)}))}}},c=(n(374),n(6)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("div",{staticClass:"news-detail"},[o("h3",[t._v(t._s(t.bbsDetail.title))]),t._v(" "),o("div",{staticClass:"news-detail-t"},[t.bbsDetail.author?o("div",{staticClass:"news-detail-t-l"},[o("img",{attrs:{src:t.bbsDetail.author.avatar_url,alt:""}})]):t._e(),t._v(" "),o("div",{staticClass:"news-detail-t-r"},[o("div",{staticClass:"news-detail-t-r-t"},[t.bbsDetail.author?o("span",[t._v(t._s(t.bbsDetail.author.nickName))]):t._e(),t._v(" "),o("button",[t._v("关注")])]),t._v(" "),o("div",{staticClass:"news-detail-t-r-d"},[o("div",{staticClass:"news-detail-t-r-d-l"},[t._v("\n                全民体育主编\n              ")]),t._v(" "),o("span",[t._v(t._s(t.bbsPublishFormatTime))])])])]),t._v(" "),o("div",{staticClass:"news-detail-c"},t._l(t.bbsDetail.content,(function(content,e){return o("div",{key:e},[1==content.type?o("div",[o("p",[t._v(t._s(content.content))])]):t._e(),t._v(" "),2==content.type?o("div",[o("img",{attrs:{src:content.content,alt:""}})]):t._e()])})),0),t._v(" "),o("div",{staticClass:"publish-comment"},[o("p",[t._v("我有话说")]),t._v(" "),o("div",{staticClass:"publish-comment-d"},[o("div",{staticClass:"publish-comment-d-i"},[""===this.avatar_url||null===this.avatar_url?o("img",{attrs:{src:n(331),alt:""}}):t._e(),t._v(" "),""!==this.avatar_url&null!==this.avatar_url?o("img",{attrs:{src:this.avatar_url,alt:""}}):t._e()]),t._v(" "),o("div",{staticClass:"publish-comment-d-tx"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyContent,expression:"replyContent"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"说两句呗"},domProps:{value:t.replyContent},on:{input:function(e){e.target.composing||(t.replyContent=e.target.value)}}}),t._v(" "),o("button",{on:{click:function(e){return t.replyNews(1)}}},[t._v("发表"),o("br"),t._v("评论")])])])]),t._v(" "),o("div",{staticClass:"comment-list"},[o("div",{staticClass:"comment-list-t"},[t._v("全部评论")]),t._v(" "),t._l(t.newsReplyList,(function(e,r){return o("div",{key:r,staticClass:"comment-list-d"},[o("div",{staticClass:"comment-list-d-t"},[null!=e.author.avatar_url&""!=e.author.avatar_url?o("img",{attrs:{src:e.author.avatar_url,alt:""}}):t._e(),t._v(" "),null==e.author.avatar_url||""==e.author.avatar_url||"https://nsports-entity.171tiyu.com/"==e.author.avatar_url?o("img",{attrs:{src:n(188),alt:""}}):t._e(),t._v(" "),o("a",[t._v(t._s(e.author.nickName))]),t._v(" "),o("span",{staticClass:"comment-list-d-t-t"},[t._v(t._s(t._f("dateForHour")(e.create_time)))])]),t._v(" "),t._l(e.content,(function(content,i){return o("div",{key:i,staticClass:"comment-list-content"},[1==content.type?o("p",[t._v("\n                "+t._s(content.content)+"\n              ")]):t._e()])})),t._v(" "),o("ul",t._l(e.replyReply,(function(n){return o("li",{key:n.reply_id},[o("div",{staticClass:"comment-item"},[o("div",{staticClass:"comment-item-reply"},[o("span",[t._v(t._s(n.author.nickName)+" :")]),t._v(" "),t._l(n.content,(function(e,n){return o("p",{key:n},[t._v(" "+t._s(e.content)+" ")])}))],2),t._v(" "),o("div",{staticStyle:{clear:"both"}}),t._v(" "),o("div",{staticClass:"comment-item-c"},[o("div",{staticClass:"comment-item-c-l"},[t._m(0,!0),t._v(" "),o("span",[t._v(t._s(n.likes_count))])]),t._v(" "),o("div",{staticClass:"comment-item-c-r"},[o("span",[t._v(t._s(t._f("dateForHour")(n.create_time)))])])]),t._v(" "),n.reply_id===t.showCommentReply?o("div",{staticClass:"comment-item-i-b"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.replyReplyContent,expression:"replyReplyContent"}],attrs:{type:"text"},domProps:{value:t.replyReplyContent},on:{input:function(e){e.target.composing||(t.replyReplyContent=e.target.value)}}}),t._v(" "),o("button",{on:{click:function(n){return t.replyReplyNews(2,e.reply_id)}}},[t._v("发表")])]):t._e()])])})),0),t._v(" "),o("div",{staticClass:"comment-list-dd"},[o("div",{staticClass:"comment-list-dd-l"},[t._m(1,!0),t._v(" "),o("span",[t._v(t._s(e.likes_count))]),t._v(" "),r!==t.showComment?o("button",{on:{click:function(e){return t.isShowComment(r)}}},[t._v("回复")]):t._e(),t._v(" "),r===t.showComment?o("button",{staticClass:"shouqi",on:{click:function(e){return t.isHideComment(r)}}},[t._v("收起")]):t._e()]),t._v(" "),o("div",{staticStyle:{clear:"both"}})]),t._v(" "),r===t.showComment?o("div",{staticClass:"comment-item-i-b"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.replyReplyContent,expression:"replyReplyContent"}],attrs:{type:"text"},domProps:{value:t.replyReplyContent},on:{input:function(e){e.target.composing||(t.replyReplyContent=e.target.value)}}}),t._v(" "),o("button",{on:{click:function(n){return t.replyReplyNews(2,e.reply_id)}}},[t._v("发表")])]):t._e()],2)}))],2),t._v(" "),o("div",{staticClass:"comment-more"},[o("span",{on:{click:function(e){return t.showMoreComment(t.offsetComment)}}},[t._v("查看更多")])])]),t._v(" "),o("div",{staticClass:"news-detail-r"},[t._m(2),t._v(" "),o("div",{staticClass:"bbs-r"},[o("div",{staticClass:"bbs-r-container"},[t._m(3),t._v(" "),o("ul",t._l(t.hotBbsList,(function(e,i){return o("li",{key:i},[o("nuxt-link",{attrs:{to:"/bbs/detail?article_id="+e.article_id}},[t._v(t._s(e.title)+"\n                ")]),t._v(" "),o("div",{staticStyle:{"padding-top":"20px"}},[o("span",[t._v(t._s(t._f("dateForHour")(e.create_time)))]),t._v(" "),o("a",[t._v(t._s(e.author.nickName))])])],1)})),0)])])])]),t._v(" "),o("el-dialog",{attrs:{title:"修改用户信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",[o("el-form-item",{attrs:{label:"头像","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadBaseUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?o("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),o("el-form-item",{attrs:{label:"昵称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.updateUserInfo}},[t._v("确 定")])],1)],1)],1)}),o,!1,null,"0e06a23f",null);e.default=component.exports}}]);