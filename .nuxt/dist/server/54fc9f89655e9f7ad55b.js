exports.ids=[8],exports.modules={111:function(t,e,d){"use strict";d.r(e);var time=d(42),base=d(4),n={name:"Detail",layout:"newsLayout",data:()=>({article_id:"",newsDetail:"",newsPublishFormatTime:"",hotNewsList:[],newsReplyList:[],showComment:-1,showCommentReply:-1,offsetComment:0,replyContent:"",dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",nickname:"",ns_device_id:"website",imageUrl:"",uploadBaseUrl:base.a.sq+"/UploadAvatar",fileObj:"",replyReplyContent:"",avatar_url:null}),head(){return{title:this.newsDetail.title}},watch:{$route(t,e){}},watchQuery:["shorturl"],async asyncData(t){const e=t.query.shorturl;let d=await t.$axios.get(`${base.a.sq}/v2/GetArticleDetail`,{params:{shorturl:e}}),n=await t.$axios.get(`${base.a.sq}/v2/GetArticles`,{params:{articleType:3,limit:4,offset:0}});const r=d.data.Data.article_id;const l=(await t.$axios.get(`${base.a.sq}/v2/`+"news/"+r+"/newest/replys",{params:{offset:0,limit:14}})).data.Data.list;return l.forEach(e=>{const d=e.reply_id;t.$axios.get(`${base.a.sq}/v2/`+"news/"+d+"/toplike/replys",{params:{offset:0}}).then(t=>{e.replyReply=t.data.Data.list})}),{newsDetail:d.data.Data,newsPublishFormatTime:Object(time.a)(d.data.Data.timestamp),hotNewsList:n.data.Data.articles,newsReplyList:l,article_id:d.data.Data.article_id}},mounted(){this.avatar_url=sessionStorage.getItem("avatar_url")},methods:{handleAvatarSuccess(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.fileObj=e.raw},beforeAvatarUpload(t){const e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},updateUserInfo(){if(""!==this.fileObj){var t={"Content-Type":"application/x-www-form-urlencoded",ns_device_id:"website",uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")},form=new FormData;form.append("image",this.fileObj),this.$axios.$post(`${base.a.sq}/UploadAvatar`,form,{headers:t}).then(t=>{1===t.Status?(sessionStorage.removeItem("avatar_url"),this.$forceUpdate(sessionStorage.setItem("avatar_url",t.Data.url))):(this.$message({message:"头像更新失败",type:"warning"}),this.$router.go(0))})}""!==this.nickname?this.$axios.put(`${base.a.sq}/UpdateNickName`,{name:this.nickname},{headers:{ns_device_id:this.ns_device_id,uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then(t=>{this.dialogFormVisible=!1,1===t.data.Status?(sessionStorage.removeItem("nickname"),sessionStorage.setItem("nickname",this.nickname),this.$message({message:"修改成功",type:"success"}),this.$router.go(0)):(this.$message.error(t.data.ErrMsg),this.$router.go(0))}):this.$message({message:"昵称不能为空",type:"warning"})},replyNews(t){const e=sessionStorage.getItem("uid"),d=sessionStorage.getItem("token"),n=sessionStorage.getItem("nickname");if(null===e||null==d)this.$message({message:"请先登录，再留言",type:"success"});else if(""===n||null===n)this.dialogFormVisible=!0;else{if(""===this.replyContent)return this.$message({message:"留言内容不能为空",type:"warning"});const n="news",r=this.article_id,l={content:[{content:this.replyContent,type:1}],level:t},o={ns_device_id:"website",uid:e,token:d};this.$axios.post(`${base.a.sq}/v2/`+n+"/"+r+"/reply",l,{headers:o}).then(t=>{1===t.data.Status?(this.$message({message:"恭喜你，留言成功",type:"success"}),this.$router.go(0)):this.$message.error(t.data.ErrMsg)})}},replyReplyNews(t,e){const d=sessionStorage.getItem("uid"),n=sessionStorage.getItem("token"),r=sessionStorage.getItem("nickname");if(null===d||null==n)this.$message({message:"请先登录，再留言",type:"success"});else if(""===r||null===r)this.dialogFormVisible=!0;else{if(""===this.replyReplyContent)return this.$message({message:"留言内容不能为空",type:"warning"});const r="news",l=e,o={content:[{content:this.replyReplyContent,type:1}],level:t},v={ns_device_id:"website",uid:d,token:n};this.$axios.post(`${base.a.sq}/v2/`+r+"/"+l+"/reply",o,{headers:v}).then(t=>{1===t.data.Status?(this.$message({message:"恭喜你，留言成功",type:"success"}),this.$router.go(0)):this.$message.error(t.data.ErrMsg)})}},isShowComment(t){this.showComment=t},isHideComment(t){this.showComment=-1},isShowCommentReply(i){this.showCommentReply=i},isHideCommentReply(i){this.showCommentReply=-1},showMoreComment(i){const t=this.article_id;this.offsetComment=i+4;this.$axios.get(`${base.a.sq}/v2/`+"news/"+t+"/newest/replys",{params:{offset:this.offsetComment,limit:4}}).then(t=>{const e=t.data.Data.list;e.forEach(t=>{const e=t.reply_id;this.$axios.get(`${base.a.sq}/v2/`+"news/"+e+"/toplike/replys",{params:{offset:0}}).then(e=>{const d=e.data.Data.list;this.$forceUpdate(t.replyReply=d)})}),this.newsReplyList=this.newsReplyList.concat(e)})}}},r=d(1);var component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._ssrNode('<div class="news-detail" data-v-7f1414d8><h3 data-v-7f1414d8>'+t._ssrEscape(t._s(t.newsDetail.title))+'</h3> <div class="news-detail-t" data-v-7f1414d8><div class="news-detail-t-l" data-v-7f1414d8><img'+t._ssrAttr("src",d(23))+' alt data-v-7f1414d8></div> <div class="news-detail-t-r" data-v-7f1414d8><div class="news-detail-t-r-t" data-v-7f1414d8>'+(t.newsDetail.author?"<span data-v-7f1414d8>"+t._ssrEscape(t._s(t.newsDetail.author.name))+"</span>":"\x3c!----\x3e")+' <button data-v-7f1414d8>关注</button></div> <div class="news-detail-t-r-d" data-v-7f1414d8><div class="news-detail-t-r-d-l" data-v-7f1414d8>\n              全民体育主编\n            </div> <span data-v-7f1414d8>'+t._ssrEscape(t._s(t.newsPublishFormatTime))+'</span></div></div></div> <div class="news-detail-c" data-v-7f1414d8>'+t._ssrList(t.newsDetail.content,(function(content,e){return"<div data-v-7f1414d8>"+(1==content.type?"<div data-v-7f1414d8><p data-v-7f1414d8>"+t._ssrEscape(t._s(content.content))+"</p></div>":"\x3c!----\x3e")+" "+(2==content.type?"<div data-v-7f1414d8><img"+t._ssrAttr("src",content.content)+" alt data-v-7f1414d8></div>":"\x3c!----\x3e")+"</div>"}))+'</div> <div class="publish-comment" data-v-7f1414d8><p data-v-7f1414d8>我有话说</p> <div class="publish-comment-d" data-v-7f1414d8><div class="publish-comment-d-i" data-v-7f1414d8>'+(""===this.avatar_url||null===this.avatar_url?"<img"+t._ssrAttr("src",d(48))+" alt data-v-7f1414d8>":"\x3c!----\x3e")+" "+(""!==this.avatar_url&null!==this.avatar_url?"<img"+t._ssrAttr("src",this.avatar_url)+" alt data-v-7f1414d8>":"\x3c!----\x3e")+'</div> <div class="publish-comment-d-tx" data-v-7f1414d8><textarea name id cols="30" rows="10" placeholder="说两句呗" data-v-7f1414d8>'+t._ssrEscape(t._s(t.replyContent))+'</textarea> <button data-v-7f1414d8>发表<br data-v-7f1414d8>评论</button></div></div></div> <div class="comment-list" data-v-7f1414d8><div class="comment-list-t" data-v-7f1414d8>全部评论</div> '+t._ssrList(t.newsReplyList,(function(e,n){return'<div class="comment-list-d" data-v-7f1414d8><div class="comment-list-d-t" data-v-7f1414d8>'+(null!=e.author.avatar_url&""!=e.author.avatar_url?"<img"+t._ssrAttr("src",e.author.avatar_url)+" alt data-v-7f1414d8>":"\x3c!----\x3e")+" "+(null==e.author.avatar_url||""==e.author.avatar_url?"<img"+t._ssrAttr("src",d(23))+" alt data-v-7f1414d8>":"\x3c!----\x3e")+" <a data-v-7f1414d8>"+t._ssrEscape(t._s(e.author.nickName))+'</a> <span class="comment-list-d-t-t" data-v-7f1414d8>'+t._ssrEscape(t._s(t._f("dateForHour")(e.create_time)))+"</span></div> "+t._ssrList(e.content,(function(content,i){return'<div class="comment-list-content" data-v-7f1414d8>'+(1==content.type?"<p data-v-7f1414d8>"+t._ssrEscape("\n              "+t._s(content.content)+"\n            ")+"</p>":"\x3c!----\x3e")+"</div>"}))+" <ul data-v-7f1414d8>"+t._ssrList(e.replyReply,(function(e){return'<li data-v-7f1414d8><div class="comment-item" data-v-7f1414d8><div class="comment-item-reply" data-v-7f1414d8><span data-v-7f1414d8>'+t._ssrEscape(t._s(e.author.nickName)+" :")+"</span> "+t._ssrList(e.content,(function(e,d){return"<p data-v-7f1414d8>"+t._ssrEscape(" "+t._s(e.content)+" ")+"</p>"}))+'</div> <div style="clear: both;" data-v-7f1414d8></div> <div class="comment-item-c" data-v-7f1414d8><div class="comment-item-c-l" data-v-7f1414d8><a href="#" data-v-7f1414d8><img'+t._ssrAttr("src",d(40))+" alt data-v-7f1414d8></a> <span data-v-7f1414d8>"+t._ssrEscape(t._s(e.likes_count))+'</span></div> <div class="comment-item-c-r" data-v-7f1414d8><span data-v-7f1414d8>'+t._ssrEscape(t._s(t._f("dateForHour")(e.create_time)))+"</span></div></div> "+(e.reply_id===t.showCommentReply?'<div class="comment-item-i-b" data-v-7f1414d8><input type="text"'+t._ssrAttr("value",t.replyReplyContent)+" data-v-7f1414d8> <button data-v-7f1414d8>发表</button></div>":"\x3c!----\x3e")+"</div></li>"}))+'</ul> <div class="comment-list-dd" data-v-7f1414d8><div class="comment-list-dd-l" data-v-7f1414d8><a href="#" data-v-7f1414d8><img'+t._ssrAttr("src",d(40))+" alt data-v-7f1414d8></a> <span data-v-7f1414d8>"+t._ssrEscape(t._s(e.likes_count))+"</span> "+(n!==t.showComment?"<button data-v-7f1414d8>回复</button>":"\x3c!----\x3e")+" "+(n===t.showComment?'<button class="shouqi" data-v-7f1414d8>收起</button>':"\x3c!----\x3e")+'</div> <div style="clear: both;" data-v-7f1414d8></div></div> '+(n===t.showComment?'<div class="comment-item-i-b" data-v-7f1414d8><input type="text"'+t._ssrAttr("value",t.replyReplyContent)+" data-v-7f1414d8> <button data-v-7f1414d8>发表</button></div>":"\x3c!----\x3e")+"</div>"}))+'</div> <div class="comment-more" data-v-7f1414d8><span data-v-7f1414d8>查看更多</span></div></div> '),t._ssrNode('<div class="news-detail-r" data-v-7f1414d8>',"</div>",[t._ssrNode('<div class="news-detail-rec" data-v-7f1414d8><div class="hot-news-list-t" data-v-7f1414d8><div class="hot-news-list-t-icon" data-v-7f1414d8></div> <span data-v-7f1414d8>你可能感兴趣的</span> <img'+t._ssrAttr("src",d(41))+' alt style="width: 20px;height: 20px;margin-right: 5px;" data-v-7f1414d8> <span style="font-size:12px;\\nfont-family:PingFangSC-Regular,PingFang SC;\\nfont-weight:400;\\ncolor:rgba(118,188,255,1);\\nline-height:30px;" data-v-7f1414d8>换一换</span></div> <div class="hot-news-list-d" data-v-7f1414d8><ul data-v-7f1414d8><li data-v-7f1414d8><div class="news-detail-rec-l" data-v-7f1414d8><img'+t._ssrAttr("src",d(23))+' alt data-v-7f1414d8></div> <div class="news-detail-rec-r" data-v-7f1414d8><span data-v-7f1414d8>全民体育官方</span> <button data-v-7f1414d8>关注</button> <div class="news-detail-rec-j" data-v-7f1414d8>\n                  全民体育主编\n                </div> <p data-v-7f1414d8>\n                  资深体育评论员，专业媒体供稿人\n                </p></div></li> <li data-v-7f1414d8><div class="news-detail-rec-l" data-v-7f1414d8><img'+t._ssrAttr("src",d(23))+' alt data-v-7f1414d8></div> <div class="news-detail-rec-r" data-v-7f1414d8><span data-v-7f1414d8>全民体育官方</span> <button data-v-7f1414d8>关注</button> <div class="news-detail-rec-j" data-v-7f1414d8>\n                  全民体育主编\n                </div> <p data-v-7f1414d8>\n                  资深体育评论员，专业媒体供稿人\n                </p></div></li> <li data-v-7f1414d8><div class="news-detail-rec-l" data-v-7f1414d8><img'+t._ssrAttr("src",d(23))+' alt data-v-7f1414d8></div> <div class="news-detail-rec-r" data-v-7f1414d8><span data-v-7f1414d8>全民体育官方</span> <button data-v-7f1414d8>关注</button> <div class="news-detail-rec-j" data-v-7f1414d8>\n                  全民体育主编\n                </div> <p data-v-7f1414d8>\n                  资深体育评论员，专业媒体供稿人\n                </p></div></li></ul></div></div> '),t._ssrNode('<div class="hot-news-list" data-v-7f1414d8>',"</div>",[t._ssrNode('<div class="hot-news-list-t" data-v-7f1414d8><div class="hot-news-list-t-icon" data-v-7f1414d8></div> <span data-v-7f1414d8>热门新闻</span></div> '),t._ssrNode('<div class="hot-news-list-d" data-v-7f1414d8>',"</div>",[t._ssrNode("<ul data-v-7f1414d8>","</ul>",t._l(t.hotNewsList,(function(e,d){return t._ssrNode("<li data-v-7f1414d8>","</li>",[t._ssrNode('<div class="hot-news-list-d-l" data-v-7f1414d8><img'+t._ssrAttr("src",e.image)+" alt data-v-7f1414d8></div> "),t._ssrNode('<div class="hot-news-list-d-r" data-v-7f1414d8>',"</div>",[n("nuxt-link",{attrs:{to:"/news/detail?shorturl="+e.shorturl}},[t._v(t._s(e.title))])],1)],2)})),0)])],2)],2),t._ssrNode(" "),n("el-dialog",{attrs:{title:"修改用户信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",[n("el-form-item",{attrs:{label:"头像","label-width":t.formLabelWidth}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadBaseUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?n("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),n("el-form-item",{attrs:{label:"昵称","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.updateUserInfo}},[t._v("确 定")])],1)],1)],2)}),[],!1,(function(t){var e=d(94);e.__inject__&&e.__inject__(t)}),"7f1414d8","62c76846");e.default=component.exports},40:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAmpJREFUOBGNlD1oU1EUx30vSaPBBEPFIW4GBAPRfImgq1IzCCIGChGaxCSDi+JSLCoiBTdnybfiIMQWwckOksG2SM1HK4bSDOKik1YSvyBN4u+ERmLsM7nDO+f97//877n3nnOVXdsjFosdx51UFOUY1trpdBr4i9iHyWRyQ2hwDoNNgZ3CmoE28VexT+CsCEeRTzQavQzB0W6353U6XTmRSPwIBAJ7LBbLSVVVz0N5ITzGBJxn9Xp9KZ/P/4zH46ZWq+WGc4G5d4hmFEAPq1xC8KYIdcP6PqFQaJ/BYLgnULPZvJHL5b72TXddEUZjFo3HOo/Hc5VV5lOp1PtBovxXKpVfbrd7mYCX2Wx2cydOsVhsulyuumSqh+BqNBqzOxF7WDqd/tLztSwab61W622VNMc5j29axFFx0WAX4yoBcgFjowZq8fx+v1G0VFRXzWbzES3iqLjNZnOw27JkOKfX6ydGDdTicSFnudynaq1WW4R0QMpHizwMJ/YE2Vm5vGW1UChsMZIERaTmhgUPziO2H2wKjQfYtk4I5XL5s9frHWOVi3a7/VW1Wm0JPmyQwG62OgNvgey6rdcVlECKc93n8x0yGo1nEH09TFTEOPtpktig5eZ6i/8R3BYt0TlHTSbTOafTuUSXbPWI/ZYy28u4A/YBsWz/3F+CMlEqlVYQPcjqk7TcGv/f+wMikYiNBWcotze066P+OfH/ERQQkTV6k4dHd4Wz/chxfBJcnjiw6/LicGbPBRsc3edrEOz9h8NhB5leI5sFzkpq9jT2Pq/Seo8zaP8rKORgMGhhi7fEp3DvZjKZhvha4zdT5fxCIgQ02AAAAABJRU5ErkJggg=="},41:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAAklJREFUOBGlVUFoU0EQfbNu2npKQbxUrcazSk9VKmgKKtIgtogePBkPCgXBopaiSNOoF6N4ECrqIb14UWorogQVkouei3etWgVBxIAHm+Q369votr+1SRZcSHb/zps3s7Mzs4I649wzs1lacVgMkiLosjBjMGMEWVPCk5sJ+Wj34imjCykJ7NoO+TMt/Q89NRv0WlyGwQCF34l4UzWYtQgliHG/xwDr+DkZLGBCayQy+5AiFbdXEA7nTK/RyFI0R0+uzZeRv90nJQt048xz09rWgl4Sj9BgF3EVlLA9k5CvFqMd8PxLE+d6SqoYL85i9N5pqThZeP5rIDeUM3MRjRmS/oRClJglwuEXpoP+PuDvTuaAXAwT1Fvz+B2mirMIkMv0yTuHq8Xwwitzn8fcVnyPPfU8cwrNZs2YbCTZAG/w+P+SWWOqTeMIj/rtQxGFZtZ95FoUkgS+fnRMyj4KzTCK3u1wedYM7CNfTBsfcCMM06ibSX5S85rfsrRijcA+sojCIE+7SzGXsrzh3UcfmhYfxdUwVpcVs5OE42o+wCS9XN8Zxd7VwD57W9oRtxylMh4rltJnsk+tUUjbzuFDEMacumsiDNmY5bBcygpZv6N0t7O7B+kw2Gcd3Yo0yTZZjhqXU7LNgezT7CINm4PDW8/aYxhjexusAv039kthGaH9CLevBeDqpx/Ir0x4175YrpdqngVIXj8oeatvB2O5fHg3WMYs+IUrtw7JlzDDP4ROaJ8AFUE/TZ5g0BefAIZkolrBtHsCHN7NvwGJxNobXsOvMAAAAABJRU5ErkJggg=="},42:function(t,e,d){"use strict";function n(t){var e,d=new Date(1e3*t),n=d.valueOf(),r=d.getFullYear(),l=d.getMonth()+1,o=d.getDate(),v=new Date;return(e=v.valueOf()-n)<=6e4?"刚刚":6e4<e&&e<=36e5?Math.round(e/6e4)+"分钟前":36e5<e&&e<=864e5?Math.round(e/36e5)+"小时前":864e5<e&&e<=1296e6?Math.round(e/864e5)+"天前":(e>1296e6&&v.getFullYear(),r+"-"+l+"-"+o)}d.d(e,"a",(function(){return n}))},48:function(t,e,d){t.exports=d.p+"img/4834ac2.png"},52:function(t,e){t.exports={}},94:function(t,e,d){"use strict";d.r(e);var n=d(52),r=d.n(n);for(var l in n)"default"!==l&&function(t){d.d(e,t,(function(){return n[t]}))}(l);e.default=r.a}};