exports.ids=[3],exports.modules={109:function(t,e,n){"use strict";n.r(e);var time=n(42),base=n(4),r={name:"Detail",layout:"bbsLayout",data:()=>({article_id:"",bbsDetail:"",bbsPublishFormatTime:"",hotBbsList:[],bbsReplyList:[],newsReplyList:[],showComment:-1,showCommentReply:-1,offsetComment:0,replyContent:"",dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",nickname:"",ns_device_id:"website",imageUrl:"",uploadBaseUrl:base.a.sq+"/UploadAvatar",fileObj:"",replyReplyContent:"",token:"",avatar_url:null}),watch:{$route(t,e){}},watchQuery:["article_id"],async asyncData(t){const e=t.query.article_id;let n=await t.$axios.get(`${base.a.sq}/v1/forum/`+e,{params:{}});let r=await t.$axios.get(`${base.a.sq}/v1/forum/`+"all/0/toplike/articles",{params:{limit:4,offset:0}});const o=e;const d=(await t.$axios.get(`${base.a.sq}/v2/`+"forum/"+o+"/newest/replys",{params:{offset:0,limit:4}})).data.Data.list;return d.forEach(e=>{const n=e.reply_id;t.$axios.get(`${base.a.sq}/v2/`+"forum/"+n+"/toplike/replys",{params:{offset:0}}).then(t=>{e.replyReply=t.data.Data.list})}),{bbsDetail:n.data.Data[0],bbsPublishFormatTime:Object(time.a)(n.data.Data[0].create_time),hotBbsList:r.data.Data.list,newsReplyList:d}},mounted(){this.token=sessionStorage.getItem("token")},methods:{handleAvatarSuccess(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.fileObj=e.raw},beforeAvatarUpload(t){const e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},updateUserInfo(){if(""!==this.fileObj){var form=new FormData;form.append("image",this.fileObj),this.$axios.post(`${base.a.sq}/UploadAvatar`,form,{headers:{"Content-Type":"application/x-www-form-urlencoded",ns_device_id:"website",uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then(t=>{1===t.data.Status?(sessionStorage.removeItem("avatar_url"),this.$forceUpdate(sessionStorage.setItem("avatar_url",t.data.Data.url))):(this.$message({message:"头像更新失败",type:"warning"}),this.$router.go(0))})}""!==this.nickname?this.$axios.put(`${base.a.sq}/UpdateNickName`,{name:this.nickname},{headers:{ns_device_id:this.ns_device_id,uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then(t=>{this.dialogFormVisible=!1,1===t.data.Status?(sessionStorage.removeItem("nickname"),sessionStorage.setItem("nickname",this.nickname),this.$message({message:"修改成功",type:"success"}),this.$router.go(0)):(this.$message.error(t.data.ErrMsg),this.$router.go(0))}):this.$message({message:"昵称不能为空",type:"warning"})},isShowCommentReply(i){this.showCommentReply=i},isHideCommentReply(i){this.showCommentReply=-1},isShowComment(t){this.showComment=t},isHideComment(t){this.showComment=-1},updateNickname(){this.$axios.put(`${base.a.sq}/UpdateNickName`,{name:this.nickname},{headers:{ns_device_id:this.ns_device_id,uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")}}).then(t=>{this.dialogFormVisible=!1,1===t.data.Status?(sessionStorage.removeItem("nickname"),sessionStorage.setItem("nickname",this.nickname),this.$message({message:"昵称修改成功",type:"success"}),this.$router.go(0)):this.$message.error(t.data.ErrMsg)})},replyNews(t){const e=sessionStorage.getItem("uid"),n=sessionStorage.getItem("token"),r=sessionStorage.getItem("nickname");if(null===e||null==n)this.$message({message:"请先登录，再留言",type:"success"});else if(""===r||null===r)this.dialogFormVisible=!0;else{if(""===this.replyContent)return this.$message({message:"留言内容不能为空",type:"warning"});const r="forum",o=this.$route.query.article_id;this.$axios.post(`${base.a.sq}/v2/`+r+"/"+o+"/reply",{content:[{content:this.replyContent,type:1}],level:t},{headers:{ns_device_id:"website",uid:e,token:n}}).then(t=>{1===t.data.Status?(this.$message({message:"恭喜你，留言成功",type:"success"}),this.$router.go(0)):this.$message.error(t.data.ErrMsg)})}},replyReplyNews(t,e){const n=sessionStorage.getItem("uid"),r=sessionStorage.getItem("token"),o=sessionStorage.getItem("nickname");if(null===n||null==r)this.$message({message:"请先登录，再留言",type:"success"});else if(""===o||null===o)this.dialogFormVisible=!0;else{if(""===this.replyReplyContent)return this.$message({message:"留言内容不能为空",type:"warning"});const o="forum";this.$axios.post(`${base.a.sq}/v2/`+o+"/"+e+"/reply",{content:[{content:this.replyReplyContent,type:1}],level:t},{headers:{ns_device_id:"website",uid:n,token:r}}).then(t=>{1===t.data.Status?(this.$message({message:"恭喜你，留言成功",type:"success"}),this.$router.go(0)):this.$message.error(t.data.ErrMsg)})}},showMoreComment(i){const t=this.$route.query.article_id;this.offsetComment=i+4;this.$axios.get(`${base.a.sq}/v2/`+"forum/"+t+"/newest/replys",{params:{offset:this.offsetComment,limit:4}}).then(t=>{const e=t.data.Data.list;e.forEach(t=>{const e=t.reply_id;this.$axios.get(`${base.a.sq}/v2/`+"forum/"+e+"/toplike/replys",{params:{offset:0}}).then(e=>{const n=e.data.Data.list;this.$forceUpdate(t.replyReply=n)})}),this.newsReplyList=this.newsReplyList.concat(e)})}}},o=n(1);var component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._ssrNode("<div data-v-0e06a23f>","</div>",[t._ssrNode('<div class="news-detail" data-v-0e06a23f><h3 data-v-0e06a23f>'+t._ssrEscape(t._s(t.bbsDetail.title))+'</h3> <div class="news-detail-t" data-v-0e06a23f>'+(t.bbsDetail.author?'<div class="news-detail-t-l" data-v-0e06a23f><img'+t._ssrAttr("src",t.bbsDetail.author.avatar_url)+" alt data-v-0e06a23f></div>":"\x3c!----\x3e")+' <div class="news-detail-t-r" data-v-0e06a23f><div class="news-detail-t-r-t" data-v-0e06a23f>'+(t.bbsDetail.author?"<span data-v-0e06a23f>"+t._ssrEscape(t._s(t.bbsDetail.author.nickName))+"</span>":"\x3c!----\x3e")+' <button data-v-0e06a23f>关注</button></div> <div class="news-detail-t-r-d" data-v-0e06a23f><div class="news-detail-t-r-d-l" data-v-0e06a23f>\n                全民体育主编\n              </div> <span data-v-0e06a23f>'+t._ssrEscape(t._s(t.bbsPublishFormatTime))+'</span></div></div></div> <div class="news-detail-c" data-v-0e06a23f>'+t._ssrList(t.bbsDetail.content,(function(content,e){return"<div data-v-0e06a23f>"+(1==content.type?"<div data-v-0e06a23f><p data-v-0e06a23f>"+t._ssrEscape(t._s(content.content))+"</p></div>":"\x3c!----\x3e")+" "+(2==content.type?"<div data-v-0e06a23f><img"+t._ssrAttr("src",content.content)+" alt data-v-0e06a23f></div>":"\x3c!----\x3e")+"</div>"}))+'</div> <div class="publish-comment" data-v-0e06a23f><p data-v-0e06a23f>我有话说</p> <div class="publish-comment-d" data-v-0e06a23f><div class="publish-comment-d-i" data-v-0e06a23f>'+(""===this.avatar_url||null===this.avatar_url?"<img"+t._ssrAttr("src",n(48))+" alt data-v-0e06a23f>":"\x3c!----\x3e")+" "+(""!==this.avatar_url&null!==this.avatar_url?"<img"+t._ssrAttr("src",this.avatar_url)+" alt data-v-0e06a23f>":"\x3c!----\x3e")+'</div> <div class="publish-comment-d-tx" data-v-0e06a23f><textarea name id cols="30" rows="10" placeholder="说两句呗" data-v-0e06a23f>'+t._ssrEscape(t._s(t.replyContent))+'</textarea> <button data-v-0e06a23f>发表<br data-v-0e06a23f>评论</button></div></div></div> <div class="comment-list" data-v-0e06a23f><div class="comment-list-t" data-v-0e06a23f>全部评论</div> '+t._ssrList(t.newsReplyList,(function(e,r){return'<div class="comment-list-d" data-v-0e06a23f><div class="comment-list-d-t" data-v-0e06a23f>'+(null!=e.author.avatar_url&""!=e.author.avatar_url?"<img"+t._ssrAttr("src",e.author.avatar_url)+" alt data-v-0e06a23f>":"\x3c!----\x3e")+" "+(null==e.author.avatar_url||""==e.author.avatar_url||"https://nsports-entity.171tiyu.com/"==e.author.avatar_url?"<img"+t._ssrAttr("src",n(23))+" alt data-v-0e06a23f>":"\x3c!----\x3e")+" <a data-v-0e06a23f>"+t._ssrEscape(t._s(e.author.nickName))+'</a> <span class="comment-list-d-t-t" data-v-0e06a23f>'+t._ssrEscape(t._s(t._f("dateForHour")(e.create_time)))+"</span></div> "+t._ssrList(e.content,(function(content,i){return'<div class="comment-list-content" data-v-0e06a23f>'+(1==content.type?"<p data-v-0e06a23f>"+t._ssrEscape("\n                "+t._s(content.content)+"\n              ")+"</p>":"\x3c!----\x3e")+"</div>"}))+" <ul data-v-0e06a23f>"+t._ssrList(e.replyReply,(function(e){return'<li data-v-0e06a23f><div class="comment-item" data-v-0e06a23f><div class="comment-item-reply" data-v-0e06a23f><span data-v-0e06a23f>'+t._ssrEscape(t._s(e.author.nickName)+" :")+"</span> "+t._ssrList(e.content,(function(e,n){return"<p data-v-0e06a23f>"+t._ssrEscape(" "+t._s(e.content)+" ")+"</p>"}))+'</div> <div style="clear: both;" data-v-0e06a23f></div> <div class="comment-item-c" data-v-0e06a23f><div class="comment-item-c-l" data-v-0e06a23f><a href="#" data-v-0e06a23f><img'+t._ssrAttr("src",n(40))+" alt data-v-0e06a23f></a> <span data-v-0e06a23f>"+t._ssrEscape(t._s(e.likes_count))+'</span></div> <div class="comment-item-c-r" data-v-0e06a23f><span data-v-0e06a23f>'+t._ssrEscape(t._s(t._f("dateForHour")(e.create_time)))+"</span></div></div> "+(e.reply_id===t.showCommentReply?'<div class="comment-item-i-b" data-v-0e06a23f><input type="text"'+t._ssrAttr("value",t.replyReplyContent)+" data-v-0e06a23f> <button data-v-0e06a23f>发表</button></div>":"\x3c!----\x3e")+"</div></li>"}))+'</ul> <div class="comment-list-dd" data-v-0e06a23f><div class="comment-list-dd-l" data-v-0e06a23f><a href="#" data-v-0e06a23f><img'+t._ssrAttr("src",n(40))+" alt data-v-0e06a23f></a> <span data-v-0e06a23f>"+t._ssrEscape(t._s(e.likes_count))+"</span> "+(r!==t.showComment?"<button data-v-0e06a23f>回复</button>":"\x3c!----\x3e")+" "+(r===t.showComment?'<button class="shouqi" data-v-0e06a23f>收起</button>':"\x3c!----\x3e")+'</div> <div style="clear: both;" data-v-0e06a23f></div></div> '+(r===t.showComment?'<div class="comment-item-i-b" data-v-0e06a23f><input type="text"'+t._ssrAttr("value",t.replyReplyContent)+" data-v-0e06a23f> <button data-v-0e06a23f>发表</button></div>":"\x3c!----\x3e")+"</div>"}))+'</div> <div class="comment-more" data-v-0e06a23f><span data-v-0e06a23f>查看更多</span></div></div> '),t._ssrNode('<div class="news-detail-r" data-v-0e06a23f>',"</div>",[t._ssrNode('<div class="news-detail-rec" data-v-0e06a23f><div class="news-detail-rec-container" data-v-0e06a23f><div class="hot-news-list-t" data-v-0e06a23f><div class="hot-news-list-t-icon" data-v-0e06a23f></div> <span data-v-0e06a23f>你可能感兴趣的</span> <a href="#" data-v-0e06a23f><img'+t._ssrAttr("src",n(41))+' alt style="width: 20px;height: 20px;margin-right: 12px;" data-v-0e06a23f> <span style="font-size:12px;\\nfont-family:PingFangSC-Regular,PingFang SC;\\nfont-weight:400;\\ncolor:rgba(118,188,255,1);\\nline-height:30px;cursor: pointer;" data-v-0e06a23f>换一换</span></a></div> <div class="hot-news-list-d" data-v-0e06a23f><ul data-v-0e06a23f><li data-v-0e06a23f><div class="news-detail-rec-l" data-v-0e06a23f><img'+t._ssrAttr("src",n(23))+' alt data-v-0e06a23f></div> <div class="news-detail-rec-r" data-v-0e06a23f><span data-v-0e06a23f>全民体育官方</span> <button data-v-0e06a23f>关注</button> <div class="news-detail-rec-j" data-v-0e06a23f>\n                      全民体育主编\n                    </div> <p data-v-0e06a23f>\n                      资深体育评论员，专业媒体供稿人\n                    </p></div></li> <li data-v-0e06a23f><div class="news-detail-rec-l" data-v-0e06a23f><img'+t._ssrAttr("src",n(23))+' alt data-v-0e06a23f></div> <div class="news-detail-rec-r" data-v-0e06a23f><span data-v-0e06a23f>全民体育官方</span> <button data-v-0e06a23f>关注</button> <div class="news-detail-rec-j" data-v-0e06a23f>\n                      全民体育主编\n                    </div> <p data-v-0e06a23f>\n                      资深体育评论员，专业媒体供稿人\n                    </p></div></li> <li data-v-0e06a23f><div class="news-detail-rec-l" data-v-0e06a23f><img'+t._ssrAttr("src",n(23))+' alt data-v-0e06a23f></div> <div class="news-detail-rec-r" data-v-0e06a23f><span data-v-0e06a23f>全民体育官方</span> <button data-v-0e06a23f>关注</button> <div class="news-detail-rec-j" data-v-0e06a23f>\n                      全民体育主编\n                    </div> <p data-v-0e06a23f>\n                      资深体育评论员，专业媒体供稿人\n                    </p></div></li></ul></div></div></div> '),t._ssrNode('<div class="bbs-r" data-v-0e06a23f>',"</div>",[t._ssrNode('<div class="bbs-r-container" data-v-0e06a23f>',"</div>",[t._ssrNode('<div class="bbs-r-c-t" data-v-0e06a23f><div class="bbs-r-c-t-icon" data-v-0e06a23f></div> <span data-v-0e06a23f>热门帖子</span></div> '),t._ssrNode("<ul data-v-0e06a23f>","</ul>",t._l(t.hotBbsList,(function(e,i){return t._ssrNode("<li data-v-0e06a23f>","</li>",[r("nuxt-link",{attrs:{to:"/bbs/detail?article_id="+e.article_id}},[t._v(t._s(e.title)+"\n                ")]),t._ssrNode(' <div style="padding-top: 20px;" data-v-0e06a23f><span data-v-0e06a23f>'+t._ssrEscape(t._s(t._f("dateForHour")(e.create_time)))+"</span> <a data-v-0e06a23f>"+t._ssrEscape(t._s(e.author.nickName))+"</a></div>")],2)})),0)],2)])],2)],2),t._ssrNode(" "),r("el-dialog",{attrs:{title:"修改用户信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",[r("el-form-item",{attrs:{label:"头像","label-width":t.formLabelWidth}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadBaseUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?r("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),r("el-form-item",{attrs:{label:"昵称","label-width":t.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.updateUserInfo}},[t._v("确 定")])],1)],1)],2)}),[],!1,(function(t){var e=n(91);e.__inject__&&e.__inject__(t)}),"0e06a23f","7045ce0d");e.default=component.exports},40:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAmpJREFUOBGNlD1oU1EUx30vSaPBBEPFIW4GBAPRfImgq1IzCCIGChGaxCSDi+JSLCoiBTdnybfiIMQWwckOksG2SM1HK4bSDOKik1YSvyBN4u+ERmLsM7nDO+f97//877n3nnOVXdsjFosdx51UFOUY1trpdBr4i9iHyWRyQ2hwDoNNgZ3CmoE28VexT+CsCEeRTzQavQzB0W6353U6XTmRSPwIBAJ7LBbLSVVVz0N5ITzGBJxn9Xp9KZ/P/4zH46ZWq+WGc4G5d4hmFEAPq1xC8KYIdcP6PqFQaJ/BYLgnULPZvJHL5b72TXddEUZjFo3HOo/Hc5VV5lOp1PtBovxXKpVfbrd7mYCX2Wx2cydOsVhsulyuumSqh+BqNBqzOxF7WDqd/tLztSwab61W622VNMc5j29axFFx0WAX4yoBcgFjowZq8fx+v1G0VFRXzWbzES3iqLjNZnOw27JkOKfX6ydGDdTicSFnudynaq1WW4R0QMpHizwMJ/YE2Vm5vGW1UChsMZIERaTmhgUPziO2H2wKjQfYtk4I5XL5s9frHWOVi3a7/VW1Wm0JPmyQwG62OgNvgey6rdcVlECKc93n8x0yGo1nEH09TFTEOPtpktig5eZ6i/8R3BYt0TlHTSbTOafTuUSXbPWI/ZYy28u4A/YBsWz/3F+CMlEqlVYQPcjqk7TcGv/f+wMikYiNBWcotze066P+OfH/ERQQkTV6k4dHd4Wz/chxfBJcnjiw6/LicGbPBRsc3edrEOz9h8NhB5leI5sFzkpq9jT2Pq/Seo8zaP8rKORgMGhhi7fEp3DvZjKZhvha4zdT5fxCIgQ02AAAAABJRU5ErkJggg=="},41:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAAklJREFUOBGlVUFoU0EQfbNu2npKQbxUrcazSk9VKmgKKtIgtogePBkPCgXBopaiSNOoF6N4ECrqIb14UWorogQVkouei3etWgVBxIAHm+Q369votr+1SRZcSHb/zps3s7Mzs4I649wzs1lacVgMkiLosjBjMGMEWVPCk5sJ+Wj34imjCykJ7NoO+TMt/Q89NRv0WlyGwQCF34l4UzWYtQgliHG/xwDr+DkZLGBCayQy+5AiFbdXEA7nTK/RyFI0R0+uzZeRv90nJQt048xz09rWgl4Sj9BgF3EVlLA9k5CvFqMd8PxLE+d6SqoYL85i9N5pqThZeP5rIDeUM3MRjRmS/oRClJglwuEXpoP+PuDvTuaAXAwT1Fvz+B2mirMIkMv0yTuHq8Xwwitzn8fcVnyPPfU8cwrNZs2YbCTZAG/w+P+SWWOqTeMIj/rtQxGFZtZ95FoUkgS+fnRMyj4KzTCK3u1wedYM7CNfTBsfcCMM06ibSX5S85rfsrRijcA+sojCIE+7SzGXsrzh3UcfmhYfxdUwVpcVs5OE42o+wCS9XN8Zxd7VwD57W9oRtxylMh4rltJnsk+tUUjbzuFDEMacumsiDNmY5bBcygpZv6N0t7O7B+kw2Gcd3Yo0yTZZjhqXU7LNgezT7CINm4PDW8/aYxhjexusAv039kthGaH9CLevBeDqpx/Ir0x4175YrpdqngVIXj8oeatvB2O5fHg3WMYs+IUrtw7JlzDDP4ROaJ8AFUE/TZ5g0BefAIZkolrBtHsCHN7NvwGJxNobXsOvMAAAAABJRU5ErkJggg=="},42:function(t,e,n){"use strict";function r(t){var e,n=new Date(1e3*t),r=n.valueOf(),o=n.getFullYear(),d=n.getMonth()+1,l=n.getDate(),c=new Date;return(e=c.valueOf()-r)<=6e4?"刚刚":6e4<e&&e<=36e5?Math.round(e/6e4)+"分钟前":36e5<e&&e<=864e5?Math.round(e/36e5)+"小时前":864e5<e&&e<=1296e6?Math.round(e/864e5)+"天前":(e>1296e6&&c.getFullYear(),o+"-"+d+"-"+l)}n.d(e,"a",(function(){return r}))},48:function(t,e,n){t.exports=n.p+"img/4834ac2.png"},49:function(t,e){t.exports={}},91:function(t,e,n){"use strict";n.r(e);var r=n(49),o=n.n(r);for(var d in r)"default"!==d&&function(t){n.d(e,t,(function(){return r[t]}))}(d);e.default=o.a}};